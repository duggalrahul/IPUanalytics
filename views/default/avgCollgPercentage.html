{{left_sidebar_enabled,right_sidebar_enabled=False,('message' in globals())}}

{{extend 'plugin_layouts/layouts/KeepitSimple.html'}}
    
    <div class="row">
        <div class="col-md-8 col-md-offset-2 text-center">
            <h1>COLLEGE RANKINGS</h1>                 
        </div>
    </div>  

    </br>
    </br>  
   
<table class="table table-striped table-hover ", border="1">
     <tr>
         <th class="col-md-1">Rank</th>
         <th class="col-md-4">College Name</th>
         <th class="col-md-3">Avg. Percentage</th>
         <th class="col-md-3">Max. Percentage</th>
         <th class="col-md-2">No. of students</th>
     </tr>
     {{for i,row in enumerate(rows):}}
     <tr>
         
         {{=TD(i+1)}}
         {{name = db(db.colleges.id==row['students']['colleges_id']).select()[0]['name']}}
         {{=TD(A(name, _href = URL('collegeSummary', args=row['students']['colleges_id'])))}}
         {{=TD(row['_extra']['(SUM(students.percentage) / COUNT(students.rollNo))'])}}
         {{=TD(row['MAX(students.percentage)'])}}
         {{=TD(row['COUNT(students.rollNo)'])}}
     </tr>
     {{pass}}     
</table>
